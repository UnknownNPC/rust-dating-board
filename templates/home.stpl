<!DOCTYPE html>
<html lang="en">

<head>
    <% let head_title="Golovna" ; %>
        <% include!("./includes/head_body.stpl"); %>
</head>

<body>
    <% include!("./includes/nav.stpl"); %>

        <div class="container">

            <p class="h1 pt-2">Анкети</p>
            <div class="card-columns">
                <% for profile in &data_context.profiles { %> 
                    <div class="card">
                        <% if profile.photo_url_opt.is_some() { %>
                        <img class="card-img-top" src="<%= profile.photo_url_opt.as_ref().unwrap() %>" alt="photo">
                        <% } %>
                        <div class="card-body p-2">
                            <h4 class="card-title mb-0"><%= profile.name %></h4>
                            <p class="card-text mb-0"><%= profile.short_description %>...</p>
                            <p class="card-text"><small class="text-muted"><%= profile.date_create %></small></p>
                        </div>
                    </div>
                        
                <% } %>
            </div>

            <nav aria-label="navigation" class="pt-3">
                <ul class="pagination justify-content-center">
                    <% if data_context.pagination.has_previous { %>
                        <li class="page-item">
                            <a class="page-link text-dark" href="/?page=<%= &data_context.pagination.current - 1 %>" tabindex="-1">Previous</a>
                        </li>
                    <% } else { %>
                        <li class="page-item disabled">
                            <a class="page-link text-dark" href="#" tabindex="-1">Previous</a>
                        </li>
                    <% } %>
                    <% for page_index in 1..data_context.pagination.total + 1 { %>
                            <!-- select <li> -->
                            <% if page_index == data_context.pagination.current { %>
                                <li class="page-item disabled">
                            <% } else { %>
                                <li class="page-item">
                            <% } %>
                                    <a class="page-link text-dark" href="/?page=<%= page_index %>"><%= page_index %></a>
                                </li>
                    <% } %>

                    <!-- disabled here -->
                    <% if data_context.pagination.has_next { %>
                        <li class="page-item">
                            <a class="page-link text-dark" href="/?page=<%= &data_context.pagination.current + 1 %>" tabindex="-1">Next</a>
                        </li>
                    <% } else { %>
                        <li class="page-item disabled">
                            <a class="page-link text-dark" href="#" tabindex="-1">Next</a>
                        </li>
                    <% } %>
                </ul>
            </nav>

        </div>

</body>

<% include!("./includes/extra_scripts.stpl"); %>

</html>